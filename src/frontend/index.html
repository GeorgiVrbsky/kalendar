<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black calendar</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="auth-section" class="auth-container">
        <div class="auth-box">
            <h1>Kalend√°≈ô</h1>
            
            <div id="login-form">
                <h2>P≈ôihl√°≈°en√≠</h2>
                <input type="text" id="loginUsername" placeholder="U≈æivatelsk√© jm√©no">
                <input type="password" id="loginPassword" placeholder="Heslo">
                <button onclick="AuthController.login()" class="primary-btn">P≈ôihl√°sit se</button>
                <p>Nem√°te √∫ƒçet? <a href="#" onclick="AuthController.toggleForms()">Registrovat se</a></p>
            </div>

            <div id="register-form" style="display: none;">
                <h2>Nov√° registrace</h2>
                <input type="text" id="regUsername" placeholder="U≈æivatelsk√© jm√©no">
                <input type="password" id="regPassword" placeholder="Heslo">
                <button onclick="AuthController.register()" class="secondary-btn">Vytvo≈ôit √∫ƒçet</button>
                <p>M√°te √∫ƒçet? <a href="#" onclick="AuthController.toggleForms()">P≈ôihl√°sit se</a></p>
            </div>
        </div>
    </div>

    <div id="app-section" class="calendar-container" style="display: none;">
        <header>
            <div class="header-left">
                <h2 id="monthDisplay">Leden 2026</h2>
                <span id="currentUserDisplay" class="user-badge"></span>
            </div>
            <div class="nav-buttons">
                <button onclick="CalendarController.showAllReminders()" title="Seznam v≈°ech √∫kol≈Ø" style="margin-right: 10px;">üìã</button>
                <button onclick="ThemeController.toggle()" id="themeBtn" title="P≈ôepnout re≈æim" style="margin-right: 15px; font-size: 20px;">üåô</button>
                <button onclick="CalendarController.goToToday()" style="font-size: 14px; margin-right: 10px;">Dnes</button>
                <button onclick="CalendarController.changeMonth(-1)">&#10094;</button>
                <button onclick="CalendarController.changeMonth(1)">&#10095;</button>
                <button onclick="AuthController.logout()" class="logout-btn">Odhl√°sit</button>
            </div>
        </header>

        <div class="days-header">
            <div>Po</div>
            <div>√öt</div>
            <div>St</div>
            <div>ƒåt</div>
            <div>P√°</div>
            <div>So</div>
            <div>Ne</div>
        </div>

        <div class="calendar-grid" id="calendarGrid">
            </div>
    </div>

    <div id="allRemindersModal" class="modal">
        <div class="modal-content" style="max-width: 500px; max-height: 80vh; overflow-y: auto;">
            <h3>V≈°echny m√© √∫koly</h3>

            <input type="text" id="searchAllInput" placeholder="üîç Hledat √∫kol..." 
                   oninput="CalendarController.handleSearch(this)" 
                   style="margin-bottom: 10px; border: 1px solid #ddd;">
            
            <div id="filterContainer" class="filter-bar">
            </div>
            <div id="allRemindersList" style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
            </div>
            <div class="modal-actions" style="margin-top: 20px;">
                <button onclick="document.getElementById('allRemindersModal').style.display='none'" class="secondary-btn">Zav≈ô√≠t</button>
            </div>
        </div>
    </div>

    <div id="reminderModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">Nov√° ud√°lost</h3>
            
            <input type="hidden" id="reminderId"> 
            
            <input type="text" id="reminderTitle" placeholder="Co se dƒõje? (N√°zev)" autocomplete="off" oninput="CalendarController.validateForm()">
            <input type="text" id="reminderDesc" placeholder="Popis (voliteln√©)" autocomplete="off">
            
            <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                <div style="flex-grow: 1;">
                    <label style="font-size: 12px; color: #888; display: block; margin-bottom: 5px;">ƒåas</label>
                    <input type="time" id="reminderTime" style="margin: 0; width: 100%;">
                </div>
                
                <div style="display: flex; align-items: center; margin-top: 18px;">
                    <input type="checkbox" id="reminderAllDay" onchange="CalendarController.toggleTimeInput()" style="width: 20px; height: 20px; margin-right: 8px;">
                    <label for="reminderAllDay" style="margin: 0; font-size: 14px;">Cel√Ω den</label>
                </div>
            </div>

            <div class="color-selection-section">
                <label>Barva kategorie: <span id="activeColorLabel" style="font-weight: normal; color: var(--text-secondary); margin-left: 5px;">Pr√°ce</span></label>
                
                <div class="color-options">
                    <div class="color-circle selected" style="background: #007AFF;" data-color="#007AFF" data-name="Pr√°ce" onclick="CalendarController.selectColor(this)" title="Pr√°ce"></div>
                    
                    <div class="color-circle" style="background: #34C759;" data-color="#34C759" data-name="Osobn√≠" onclick="CalendarController.selectColor(this)" title="Osobn√≠"></div>
                    
                    <div class="color-circle" style="background: #FF3B30;" data-color="#FF3B30" data-name="D≈Øle≈æit√©" onclick="CalendarController.selectColor(this)" title="D≈Øle≈æit√©"></div>
                    
                    <div class="color-circle" style="background: #FF9500;" data-color="#FF9500" data-name="Ostatn√≠" onclick="CalendarController.selectColor(this)" title="Ostatn√≠"></div>
                    
                    <div class="color-circle" style="background: #AF52DE;" data-color="#AF52DE" data-name="Z√°bava" onclick="CalendarController.selectColor(this)" title="Z√°bava"></div>
                    
                    <div class="custom-color-wrapper">
                        <input type="color" id="customColorInput" onchange="CalendarController.selectCustomColor(this)">
                        <span style="font-size: 10px; margin-left: 5px;">Vlastn√≠</span>
                    </div>
                </div>
                <input type="hidden" id="selectedColor" value="#007AFF">
            </div>
            
            <label style="margin-bottom: 15px;">√öƒçastn√≠ci:</label>
            <div class="user-selection-wrapper">
                <input type="text" id="userSearchInput" placeholder="üîç Hledat jm√©no..." onkeyup="CalendarController.filterUsers()">
                
                <div id="userListContainer" class="user-list">
                    </div>
            </div>
            
            <input type="hidden" id="selectedDate">
            
            <div class="modal-actions">
                <button id="deleteBtn" onclick="CalendarController.deleteReminder()" style="background: rgba(255,59,48,0.1); color: #FF3B30; display: none;">Smazat</button>
                <div style="flex-grow: 1;"></div>
                <button onclick="CalendarController.closeModal()">Zru≈°it</button>
                <button id="saveReminderBtn" onclick="CalendarController.saveOrUpdate()" class="primary-btn">Ulo≈æit</button>
            </div>
        </div>
    </div>

    <div id="reminderActionMenu" class="action-menu">
        <button onclick="CalendarController.handleMenuEdit()">‚úèÔ∏è Upravit</button>
        <button onclick="CalendarController.handleMenuDelete()" class="delete-opt">üóëÔ∏è Smazat</button>
    </div>

    <script type="module" src="script/main.js"></script>
    <div id="toastContainer" class="toast-container"></div>

</body>
</html>